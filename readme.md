## Лабораторная работа 3: Kubernetes

### Задача

*Установить Kubernetes на локальную машину и развернуть тестовый сервис.*

## Запуск Minikube:
![alt text](image.png)

## Проверка, что Minikube работает:
![alt text](image-1.png)
![alt text](image-2.png)

## Прогоняем манифесты используя команду `kubectl apply -f <имя_файла>` для создания объектов.
![alt text](image-3.png)

## Проверяем созданные ресурсы с помощью `kubectl get` и `kubectl describe`.
![alt text](image-4.png)

## Создаем nextcloud.yml, после  запуска пода, проверяем его состояние с помощью `kubectl logs`
![alt text](image-5.png)

## Создание service nextcloud c перенаправлением портов командой `kubectl expose deployment nextcloud --type=NodePort --port=80`
## Туннелирование: `minikube service nextcloud`
![alt text](image-6.png)
## Nextcloud
![alt text](image-7.png)
## Дополнительный компонент dashboard для minikube
![alt text](image-8.png)

## Ответы на вопросы

1. **Важен ли порядок выполнения манифестов?**
   - Да, порядок выполнения манифестов важен, так как одни ресурсы зависят от других. Например, деплоймент PostgreSQL зависит от существования ConfigMap и Secret, следовательно не сможет запуститься, пока они не запущены. Также и сервис создается до деплоймент, чтобы обеспечить доступ к базе данных.

2. **Что произойдет, если отскейлить количество реплик postgres-deployment в 0, затем обратно в 1?**
   - При скейлинге в 0 все поды будут удалены, и соединение с базой данных будет потеряно. Также и Nextcloud потеряет соединение. При возврате в 1 база данных будет перезапущена, и данные сохранятся, если используется постоянное хранилище. Однако, Nextcloud будет видеть БД, но не сможет подключиться к ней. потому что соединение прервалось при отключении базы данных и не восстанавливалось автоматически.
